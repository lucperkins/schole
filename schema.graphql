schema {
  query: RootQueryType
  mutation: RootMutationType
}

input NewReleaseNote {
  version: String!
  notes: String!
}

type ReleaseNote {
  id: ID!
  version: String!
  notes: String!
  project: Project
}

type Document {
  id: ID!
  title: String!
  url: String!
  description: String
  content: String!
  metadata: Json
  tags: [String]
  project: Project
}

input NewDocument {
  title: String!
  url: String!
  description: String
  content: String!
  metadata: Json
  tags: [String]
}

"The `Json` scalar type allows you to use arbitrary JSON data in Schole."
scalar Json

type RootMutationType {
  "Create a new project"
  createProject(project: NewProject!): Project

  "Delete a project"
  deleteProject(id: ID!): Project

  "Create a new document"
  createDocument(document: NewDocument!, projectId: ID!): Document

  "Delete a document"
  deleteDocument(id: ID!): Document

  "Create release notes"
  createReleaseNotes(releaseNote: NewReleaseNote!, projectId: ID!): ReleaseNote

  "Delete release notes"
  deleteReleaseNotes(id: ID!): ReleaseNote
}

type RootQueryType {
  "Find a project via some combination of ID, title, slug, and tags"
  findProjects(tags: [String], slug: String, title: String, id: ID): [Project]

  "Find documents via some combination of title, tags, or text query string"
  findDocuments(query: String, tags: [String], title: String): [Document]

  "Find release notes (all or for a specific project)"
  findReleaseNotes(projectId: ID): [ReleaseNote]

  "Fetch a specific document by ID"
  getDocument(id: ID): Document
}

type Project {
  id: ID!
  slug: String!
  title: String!
  metadata: Json
  tags: [String]
  documents: [Document]
  releaseNotes: [ReleaseNote]
}

input NewProject {
  title: String!
  slug: String
  metadata: Json
}
